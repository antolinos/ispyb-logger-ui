/*! ISPyB Logger UI - v0.1.0 - 2016-09-19
* https://github.com/antolinos/ispyb-logger-ui
* Copyright (c) 2016 A. de Maria; Licensed MIT */
function StatsParser(){}!function(a){a.fn.ispyb_logger_ui=function(){return this.each(function(b){a(this).html("awesome"+b)})},a.ispyb_logger_ui=function(b){return b=a.extend({},a.ispyb_logger_ui.options,b),"awesome"+b.punctuation},a.ispyb_logger_ui.options={punctuation:"."},a.expr[":"].ispyb_logger_ui=function(b){return a(b).text().indexOf("awesome")!==-1}}(jQuery),StatsParser.prototype.plotPie=function(a){for(var b=_.groupBy(a,"PACKAGE"),c=_.keys(b),d=[],e=0;e<c.length;e++)d.push(b[c[e]].length);var f=[{values:d,labels:c,type:"pie"}],g={height:400,width:450};myPlot=Plotly.newPlot("pie-chart",f,g)},StatsParser.prototype.parseToVisualize=function(a){for(var b={x:[],y:[]},c=0;c<a.length;c++)b.x.push(a[c].H+a[c].MI/60),b.y.push(a[c].DURATION);return b},StatsParser.prototype.plotScatter=function(a){Plotly.d3.csv("https://raw.githubusercontent.com/plotly/datasets/master/gapminderDataFiveYear.csv",function(a,b){function c(a,b){return a.map(function(a){return a[b]})}var d=2007,e=["Asia","Europe","Africa","Oceania","Americas"],f=2e5,g=e.map(function(a){var e=b.filter(function(b){return b.continent===a&&+b.year===d});return{mode:"markers",name:a,x:c(e,"lifeExp"),y:c(e,"gdpPercap"),text:c(e,"country"),marker:{sizemode:"area",size:c(e,"pop"),sizeref:f}}}),h={xaxis:{title:"Life Expectancy"},yaxis:{title:"GDP per Capita",type:"log"},margin:{t:20},hovermode:"closest"};Plotly.plot("ispyb-api",g,h,{showLink:!1})})},StatsParser.prototype.parse=function(a){this.logMessages=a,this.plotPie(a),this.plotScatter(a)};